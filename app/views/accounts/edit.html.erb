<% content_for :title, "Account Information" %>

<main class="flex justify-center px-4 py-10">
  <div class="w-full max-w-3xl space-y-8">
    <section class="rounded-3xl bg-white px-8 py-8 shadow-sm ring-1 ring-slate-200">
      <h1 class="text-2xl font-semibold text-[#500000]">Account Information</h1>
      <p class="mt-2 text-sm text-slate-600">
        View and update your personal details for the MHA Program Portal.
      </p>

      <%= form_with model: @user, url: account_path, method: :patch, local: true, class: "mt-6 space-y-6" do |f| %>
        <% if @user.errors.any? %>
          <div class="rounded-xl border border-rose-300 bg-rose-50 px-4 py-3 text-sm text-rose-800">
            <p class="font-semibold">Please fix the following:</p>
            <ul class="mt-1 list-disc pl-5">
              <% @user.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="grid gap-4 sm:grid-cols-2">
          <div>
            <%= f.label :name, "Full Name", class: "block text-sm font-medium text-slate-700" %>
            <%= f.text_field :name,
                  class: "mt-1 block w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-[#500000] focus:outline-none focus:ring-2 focus:ring-[#500000]" %>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700">Email</label>
            <p class="mt-1 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700">
              <%= @user.email %>
            </p>
          </div>

          <div>
            <label class="block text-sm font-medium text-slate-700">Role</label>
            <p class="mt-1 rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-700">
              <% if @user.respond_to?(:role_admin?) && @user.role_admin? %>
                Admin
              <% elsif @user.respond_to?(:role_advisor?) && @user.role_advisor? %>
                Advisor
              <% elsif @user.respond_to?(:role_student?) && @user.role_student? %>
                Student
              <% else %>
                User
              <% end %>
            </p>
          </div>
        </div>

        <div class="mt-6 flex items-center justify-between gap-3">
          <button type="button"
                  onclick="window.history.back()"
                  class="inline-flex items-center rounded-md border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            ‚Üê Back
          </button>

          <%= f.submit "Save changes",
                class: "inline-flex items-center rounded-md bg-[#500000] px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#3f0000] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#500000]" %>
        </div>
      <% end %>

      <p class="mt-4 text-xs text-slate-500">
        For security reasons, passwords and sign-in credentials are managed through the standard sign-in flow, not on this page.
      </p>
    </section>
  </div>
</main>
