<% content_for :title, "About the Portal" %>

<% content_for :header do %>
  <%= render "shared/login_navbar" %>
<% end %>

<main class="about-page px-4 py-16">
  <div class="about-container container-md stack stack--xl">
    <section class="about-hero">
      <div class="about-hero__content">
        <p class="eyebrow">Texas A&M ¬∑ Master of Health Administration</p>
        <h1>MHA Program Portal</h1>
        <p>
          A unified workspace for survey workflows, feedback loops, and role-aware insights. Each dashboard in the portal is designed
          around the needs called out in the <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Project-Overview" target="_blank" rel="noopener" class="about-link">Project Overview</a> and
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Features" target="_blank" rel="noopener" class="about-link">Features</a> wiki pages‚Äîso the UI mirrors the documentation.
        </p>
        <div class="about-hero__badges">
          <span>
            <strong>3</strong>
            Roles, each with guided dashboards
          </span>
          <span>
            <strong>12+</strong>
            Surveys & feedback automations
          </span>
          <span>
            <strong>100%</strong>
            TAMU SSO coverage and audit trails
          </span>
        </div>
      </div>
      <div class="about-hero__card">
        <p class="eyebrow">Quick jumps</p>
        <a href="#student-view">üéì Student experience</a>
        <a href="#advisor-view">üßë‚Äçüè´ Advisor workspace</a>
        <a href="#admin-view">üõ†Ô∏è Admin controls</a>
        <div class="about-hero__cta">
          <p>New to the stack?</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Getting-Started" target="_blank" rel="noopener">Read Getting Started ‚Üí</a>
        </div>
      </div>
    </section>

    <section class="about-pillars">
      <header>
        <p class="eyebrow">Why the portal exists</p>
        <h2>Program pillars lifted from the wiki</h2>
        <p>Everything here ties directly to the goals described in <em>Project Overview</em>: centralized data, streamlined surveys, and actionable analytics.</p>
      </header>
      <div class="about-pillars__grid">
        <article>
          <p class="eyebrow">Centralized data</p>
          <h3>Student health + survey history</h3>
          <p>Rails + PostgreSQL keep student records, survey assignments, and evidence attachments cohesive for advisors and admins.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Architecture" target="_blank" rel="noopener" class="about-link">See wiki ‚Ä∫ Architecture</a>
        </article>
        <article>
          <p class="eyebrow">Track-aware surveys</p>
          <h3>Residential & Executive cohorts</h3>
          <p>Survey builder, track assignments, and notifications (see <em>Features ‚Ä∫ Surveys</em>) ensure each cohort receives the right cadence.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Features#surveys-feedback--evidence" target="_blank" rel="noopener" class="about-link">See wiki ‚Ä∫ Features ‚Üí Surveys</a>
        </article>
        <article>
          <p class="eyebrow">Analytics & reporting</p>
          <h3>Reports hub + exports</h3>
          <p>`Reports::DataAggregator` powers KPI cards, PDF/Excel exports, and adviser-ready snapshots documented in the Analytics wiki section.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Features#analytics--reporting" target="_blank" rel="noopener" class="about-link">See wiki ‚Ä∫ Features ‚Üí Analytics</a>
        </article>
      </div>
    </section>

    <section class="about-roles">
      <header>
        <p class="eyebrow">Role playbooks</p>
        <h2>Dashboards aligned to each persona</h2>
        <p>Borrowed from the ‚ÄúAuthentication & Access Control‚Äù and role sections of the wiki: dashboards are scoped but share a design language.</p>
      </header>
      <div class="about-roles__grid">
        <article id="student-view" class="about-role-card">
          <div class="about-role-card__icon">üéì</div>
          <h3>Student view</h3>
          <p>Focus on assignments, completion progress, and advisor feedback.</p>
          <ul>
            <li>Pending & completed surveys with PDF exports.</li>
            <li>Evidence uploads validated via the evidence checker.</li>
            <li>Notifications mirroring Survey Notification Jobs.</li>
          </ul>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Student-Experience" target="_blank" rel="noopener" class="about-role-card__hint">See wiki ‚Ä∫ Student Experience</a>
        </article>

        <article id="advisor-view" class="about-role-card">
          <div class="about-role-card__icon">üßë‚Äçüè´</div>
          <h3>Advisor view</h3>
          <p>Progress dashboards for advisees plus quick assignment tools.</p>
          <ul>
            <li>Roster management with ‚ÄúReview‚Äù & ‚ÄúEdit feedback‚Äù flows.</li>
            <li>Assign/unassign surveys, including bulk actions.</li>
            <li>Real-time notifications for due dates and updates.</li>
          </ul>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Advisor-Experience" target="_blank" rel="noopener" class="about-role-card__hint">See wiki ‚Ä∫ Advisor Experience</a>
        </article>

        <article id="admin-view" class="about-role-card">
          <div class="about-role-card__icon">üõ†Ô∏è</div>
          <h3>Admin view</h3>
          <p>Configuration for surveys, membership, and compliance.</p>
          <ul>
            <li>Survey builder with lifecycle controls + audit logs.</li>
            <li>Role & membership management to balance cohorts.</li>
            <li>System overview dashboard with counts and activity.</li>
          </ul>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Administrator-Tooling" target="_blank" rel="noopener" class="about-role-card__hint">See wiki ‚Ä∫ Administrator Tooling</a>
        </article>
      </div>
    </section>

    <section class="about-resources">
      <header>
        <p class="eyebrow">Documentation map</p>
        <h2>Start with these wiki entries</h2>
        <p>Use the wiki as the source of truth for environment setup, deployment, and day-to-day administration.</p>
      </header>
      <div class="about-resources__grid">
        <article>
          <h3>Getting Started</h3>
          <p>Local setup, Docker stack, and credential tips for new contributors.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Getting-Started" target="_blank" rel="noopener">Open wiki ‚Ä∫ Getting-Started</a>
        </article>
        <article>
          <h3>Development Guide</h3>
          <p>Branch strategy, lint/test commands, and UI conventions used across the portal.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Development-Guide" target="_blank" rel="noopener">Open wiki ‚Ä∫ Development-Guide</a>
        </article>
        <article>
          <h3>System Administration</h3>
          <p>Deployment, environment variables, and Heroku transfer checklists.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/System-Administration" target="_blank" rel="noopener">Open wiki ‚Ä∫ System-Administration</a>
        </article>
        <article>
          <h3>Features deep dive</h3>
          <p>End-to-end walk through of authentication, surveys, analytics, and automation.</p>
          <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki/Features" target="_blank" rel="noopener">Open wiki ‚Ä∫ Features</a>
        </article>
      </div>
      <div class="about-resources__footer">
        <a href="https://github.com/FaqiangMei/MHA-Survey-Portal/wiki" target="_blank" rel="noopener" class="<%= tailwind_button_classes(:primary) %>">Browse full wiki</a>
        <button type="button" onclick="window.history.back()" class="<%= tailwind_button_classes(:secondary) %>">‚Üê Back to previous page</button>
      </div>
    </section>

    <!-- Hidden SSO forms to allow top nav "Students" / "Advisors" to act like the main page buttons -->
    <%= form_with url: user_google_oauth2_omniauth_authorize_path,
                  method: :post,
                  data: { turbo: "false" },
                  id: "hidden-student-signin",
                  html: { style: "display:none" } do |f| %>
      <%= f.hidden_field :role, value: "student" %>
    <% end %>

    <%= form_with url: user_google_oauth2_omniauth_authorize_path,
                  method: :post,
                  data: { turbo: "false" },
                  id: "hidden-advisor-signin",
                  html: { style: "display:none" } do |f| %>
      <%= f.hidden_field :role, value: "advisor" %>
    <% end %>

    <script>
      (function () {
        const studentTab = document.querySelector('[data-signin-role="student"]');
        const advisorTab = document.querySelector('[data-signin-role="advisor"]');
        const studentForm = document.getElementById('hidden-student-signin');
        const advisorForm = document.getElementById('hidden-advisor-signin');

        function wire(link, form) {
          if (!link || !form) return;
          link.addEventListener('click', function (e) {
            e.preventDefault();
            form.submit();
          });
        }

        wire(studentTab, studentForm);
        wire(advisorTab, advisorForm);
      })();
    </script>
