<!-- app/views/dashboards/student.html.erb -->

<main class="main-content">
  <div class="dashboard-grid dashboard-grid-2">
    
    <!-- To-Do Section -->
    <section class="dashboard-card">
      <h2 class="section-title">
        <div class="section-icon"></div>
        To-do
      </h2>
      
      <div class="todo-list">
        <% if @pending_survey_responses.present? %>
          <% @pending_survey_responses.each do |response| %>
            <% survey = response.survey %>
            <div class="todo-item">
              <div class="survey-icon"></div>
              <div class="survey-title"><%= survey.title %></div>
              <div class="survey-meta">Status: <%= response.status.titleize %></div>
              <div class="survey-actions">
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end; align-items: center;">
                  <%= link_to 'Open', survey_path(survey), class: tailwind_button_classes(:primary) %>
                </div>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="todo-item empty">No pending surveys</div>
        <% end %>
      </div>
    </section>

    <!-- Notifications Section -->
    <section class="dashboard-card">
      <h2 class="section-title">
        <div class="section-icon"></div>
        Notifications
      </h2>
      
  <div class="notification-list">
        <div class="notification">
          <div class="notification-icon"></div>
          <div class="notification-content">
            <div class="notification-text">
              New feedback:
              <span class="notification-title">Current Residential and Executive MHA Track Study Survey.</span>
            </div>
            <div class="notification-time">2 hours ago</div>
          </div>
        </div>
        
        <div class="notification">
          <div class="notification-icon"></div>
          <div class="notification-content">
            <div class="notification-text">
              Survey reminder:
              <span class="notification-title">Please complete your pending surveys.</span>
            </div>
            <div class="notification-time">1 day ago</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Completed Surveys Section -->
    <section class="dashboard-card">
      <h2 class="section-title">
        <div class="section-icon"></div>
        Completed Surveys
      </h2>

      <div class="completed-list">
        <% if @completed_survey_responses.present? %>
          <% @completed_survey_responses.each do |response| %>
            <% survey = response.survey %>
            <div class="completed-item">
              <div class="survey-icon"></div>
              <div class="survey-title"><%= survey.title %></div>
              <div class="survey-meta">Submitted on <%= response.updated_at&.to_date || 'N/A' %></div>
              <div class="survey-actions">
                <div style="display: flex; gap: 0.5rem; justify-content: flex-end; align-items: center;">
                  <%= link_to 'View response', survey_response_path(response), class: tailwind_button_classes(:primary) %>
                </div>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="completed-item empty">No completed surveys</div>
        <% end %>
      </div>
    </section>

  </div>
</main>
